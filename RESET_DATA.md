# 🔄 데이터베이스 초기화 가이드

GOYO 시스템의 샘플 데이터를 새로 생성하려면 다음 단계를 따르세요.

## 📊 새로운 샘플 데이터 내역

### 풍부한 가상 데이터
- **케어 인력**: 8명 (다양한 위험도)
- **감정 로그**: **960+ 건** (60일간, 하루 2-4회 기록)
- **리스크 알림**: 10건 (활성/확인/해결 상태)
- **상담사**: 5명 (다양한 전문 분야)
- **상담 세션**: 7건 (예정/진행/완료/취소)
- **상담 이력**: 3건 (결과 및 후속 조치)
- **리포트**: 4건 (주간/월간/분기/위험 분석)

### 워커별 특성
1. **김미영** (워커 ID: 1) - 🔴 **고위험군**
   - 최근 2주간 부정적 감정 75%
   - 스트레스 지수 평균 8/10
   - 리스크 점수: 72점
   - 자동 상담 연계됨

2. **최민준** (워커 ID: 4) - 🟡 **주의군**
   - 최근 3주간 피로 누적
   - 스트레스 지수 평균 6/10
   - 리스크 점수: 58점

3. **한민수** (워커 ID: 8) - 🟡 **경미한 스트레스**
   - 최근 10일간 스트레스 증가
   - 리스크 점수: 45점

4. **이정수, 박서연** (워커 ID: 2, 3) - 🟢 **안정**
   - 긍정적 감정 비율 70%+
   - 리스크 점수: 30점 미만

5. **나머지 워커** - 🟢 **정상**
   - 일반적인 감정 패턴
   - 리스크 점수: 40점 미만

---

## 🔄 데이터베이스 초기화 방법

### 방법 1: 자동 초기화 (권장)

```bash
# 1. 기존 데이터베이스 삭제
rm goyo.db

# 2. 앱 실행 (새 DB 자동 생성)
npm start
# 또는
./run.sh
```

### 방법 2: 개발 모드로 초기화

```bash
# 1. 기존 데이터베이스 삭제
rm goyo.db

# 2. 개발 모드 실행 (Hot Reload + 개발자 도구)
npm run dev
# 또는
./dev.sh
```

### 방법 3: 수동 초기화 (고급)

```bash
# 1. 데이터베이스 백업 (선택사항)
cp goyo.db goyo.db.backup

# 2. 데이터베이스 삭제
rm goyo.db

# 3. 앱 실행
npm start
```

---

## ✅ 초기화 확인

앱을 실행한 후 콘솔에서 다음 메시지를 확인하세요:

```
🎉 모든 샘플 데이터 생성 완료!
📊 데이터 요약:
  - 케어 인력: 8명
  - 감정 로그: 960+ 건 (60일간, 하루 2-4회)
  - 리스크 알림: 10건
  - 상담사: 5명
  - 상담 세션: 7건
  - 상담 이력: 3건
  - 리포트: 4건
```

---

## 🎯 초기화 후 확인 사항

### 1. 대시보드 확인
- 전체 인력: 8명
- 안정 상태: 5명 (62.5%)
- 주의 필요: 2명 (25%)
- 위험 상태: 1명 (12.5%)

### 2. 리스크 알림 확인
- 활성 알림: 2-3건
- 확인된 알림: 2-3건
- 해결된 알림: 5-6건

### 3. 상담 연계 확인
- 예정된 상담: 3건
- 완료된 상담: 3건
- 취소된 상담: 1건

### 4. 데이터 분석 확인
- 부서별 감정 비교 차트
- 월별 번아웃 추이 그래프
- 감정 타입 분포 (960+ 로그)

### 5. 리포트 확인
- 최근 생성 리포트: 4건
- 주간/월간/분기/위험 분석

---

## 🚨 문제 해결

### 데이터가 표시되지 않을 때

**증상**: 대시보드가 비어있거나 "데이터 없음" 표시

**해결책**:
```bash
# 1. 앱 완전 종료
# 2. 데이터베이스 완전 삭제
rm -f goyo.db*
# 3. 앱 재시작
npm start
```

### 데이터베이스 파일이 잠겨있을 때

**증상**: "database is locked" 에러

**해결책**:
```bash
# 1. 모든 Electron 프로세스 종료
pkill -9 electron
# 또는 Mac에서
killall Electron

# 2. 데이터베이스 삭제
rm goyo.db

# 3. 앱 재시작
npm start
```

### 개발자 도구에서 에러가 보일 때

**증상**: 콘솔에 "cannot read property" 에러

**해결책**:
```bash
# 1. 캐시 클리어
# 개발자 도구에서 Ctrl+Shift+R (하드 리프레시)

# 2. 또는 앱 재시작
npm start
```

---

## 🎓 데모 시연용 데이터 시나리오

### 시나리오 1: 고위험 워커 조기 발견
1. 대시보드에서 **"위험 상태 1명"** 확인
2. 리스크 알림 탭으로 이동
3. **김미영님** 고위험 알림 (72점) 확인
4. 알림 클릭 → 개입 방안 확인
5. 심리상담 연계 → 자동 매칭된 상담 확인

### 시나리오 2: 풍부한 감정 데이터 분석
1. 데이터 분석 탭으로 이동
2. 부서별 비교 차트 → **A팀 스트레스 높음** 확인
3. 월별 추이 그래프 → **최근 2주 상승세** 확인
4. 감정 분포 차트 → **960+ 로그** 기반 정확한 분석

### 시나리오 3: 상담 연계 시스템
1. 심리상담 연계 탭으로 이동
2. 예정된 상담 **3건** 확인
3. 상담사 관리 → **5명** 가용 상담사
4. 상담 이력 → 완료된 상담 **3건** 및 결과

### 시나리오 4: 리포트 생성
1. 리포트 탭으로 이동
2. 최근 생성 리포트 **4건** 확인
3. 주간 리포트 클릭 → 상세 분석 확인
4. 위험 분석 리포트 → 김미영님 집중 분석

---

## 📝 참고 사항

### 샘플 데이터 특징
- **현실적인 패턴**: 주중 vs 주말, 아침 vs 저녁 근무 반영
- **워커별 차별화**: 고위험, 주의, 정상 그룹 명확히 구분
- **시간 흐름**: 60일간 감정 변화 추이 확인 가능
- **상담 워크플로우**: 예정 → 진행 → 완료 → 후속 조치

### 데이터 커스터마이징
`main.js` 파일의 `initDatabase()` 함수에서:
- 워커 수 조정
- 감정 로그 기간 조정 (현재 60일)
- 하루 로그 빈도 조정 (현재 2-4회)
- 워커별 위험도 패턴 조정

---

## 🎉 초기화 완료!

새로운 풍부한 샘플 데이터로 GOYO 시스템을 체험하세요!

**960+ 개의 감정 로그**로 정확한 트렌드 분석과 예측이 가능합니다! 📊
